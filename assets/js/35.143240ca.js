(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{438:function(e,a,s){"use strict";s.r(a);var t=s(56),l=Object(t.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"框架数据对象使用示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#框架数据对象使用示例"}},[e._v("#")]),e._v(" 框架数据对象使用示例")]),e._v(" "),s("h2",{attrs:{id:"初始化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化"}},[e._v("#")]),e._v(" 初始化")]),e._v(" "),s("ul",[s("li",[e._v("引用init.php文件(如果在根路径下)\n"),s("ul",[s("li",[e._v('示例:如果文件在根路径下引用: require_once("init.php");')])])])]),e._v(" "),s("ul",[s("li",[e._v("可以使用根路径下的test.php测试验证框架的通用方法。")])]),e._v(" "),s("h3",{attrs:{id:"实例方法示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例方法示例"}},[e._v("#")]),e._v(" 实例方法示例")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("save: 保存数据对象")]),e._v(" "),s("ul",[s("li",[e._v("说明: 保存用户信息")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$user = new User();\n$user->setUsername("betterlife");\n$user->setPassword("123456");\n$user_id = $user->save();\nif ( $user_id ) echo("新增用户标识:" . $user_id); else echo("新增用户失败!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("新增用户标识:3\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("update: 更新数据对象")]),e._v(" "),s("ul",[s("li",[e._v("说明: 修改用户信息")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$user = User::getById( 3 );\n$user["username"] = "shanghai";\n$user->update();\nif ( $user ) echo("修改用户信息成功!"); else echo("修改用户信息失败!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("修改用户信息成功!\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("saveOrUpdate: 保存或修改数据对象")]),e._v(" "),s("ul",[s("li",[e._v("说明: 保存或更新用户信息")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$user = User::getById( 3 );\n$user["username"] = "shanghai";\n$user_id = $user->saveOrUpdate();\nif ( $user_id > 1 ) echo("新增用户标识:" . $user_id); elseif ( $user_id == true ) echo("修改用户信息成功!");else echo("修改用户信息失败!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("修改用户信息成功!\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("delete: 删除数据对象")]),e._v(" "),s("ul",[s("li",[e._v("说明: 删除用户信息")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$user = User::getById( 3 );\n$isDelete = $user->delete();\nif ( $isDelete ) echo("删除用户信息成功!"); else echo("删除用户信息失败!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("删除用户信息成功!\n")])])])])])])]),e._v(" "),s("h3",{attrs:{id:"类方法示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类方法示例"}},[e._v("#")]),e._v(" 类方法示例")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("updateProperties: 更新对象指定的属性")]),e._v(" "),s("ul",[s("li",[e._v("说明: 修改用户指定的信息")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$isUpdate = User::updateProperties( "1,2", "loginTimes=100" );\nif ( $isUpdate ) echo("修改用户信息成功!"); else echo("修改用户信息失败!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("修改用户信息成功!\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("updateBy: 根据条件更新数据对象指定的属性")]),e._v(" "),s("ul",[s("li",[e._v("说明: 修改用户指定的信息")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$isUpdate = User::updateBy( "username=\'admin\'","loginTimes=500" );\nif ( $isUpdate ) echo("修改用户信息成功!"); else echo("修改用户信息失败!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("修改用户信息成功!\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("deleteByID: 由标识删除指定ID数据对象")]),e._v(" "),s("ul",[s("li",[e._v("说明: 删除指定标识的用户")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$isDelete = User::deleteByID( 4 );\nif ( $isDelete ) echo("删除用户信息成功!"); else echo("删除用户信息失败!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("删除用户信息成功!\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("deleteByIds: 根据主键删除多条记录")]),e._v(" "),s("ul",[s("li",[e._v("说明: 删除多条指定标识的用户")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$isDelete = User::deleteByIds( "5,6,7" );\nif ( $isDelete ) echo("删除用户信息成功!"); else echo("删除用户信息失败!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("删除用户信息成功!\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("deleteBy: 根据条件删除多条记录")]),e._v(" "),s("ul",[s("li",[e._v("说明:删除指定条件的用户")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('说明:删除指定条件的用户\n代码如下:\n$isDelete = User::deleteBy( "username=\'betterlife7\'" );\nif ( $isDelete ) echo("删除用户信息成功!"); else echo("删除用户信息失败!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("删除用户信息成功!\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("increment: 对属性进行递增")]),e._v(" "),s("ul",[s("li",[e._v("说明: 用户访问次数+5")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$isPlus = User::increment( "user_id>1", "loginTimes", 5 );\nif ( $isPlus ) echo("用户访问次数+5成功!"); else echo("用户访问次数+5失败!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("用户访问次数+5成功!\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("decrement: 对属性进行递减")]),e._v(" "),s("ul",[s("li",[e._v("说明: 用户访问次数-3")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$isMinus = User::decrement( "user_id>1", "loginTimes",3 );\nif ( $isMinus ) echo("用户访问次数-3成功!"); else echo("用户访问次数-3失败!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("用户访问次数-3成功!\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("existByID: 由标识判断指定ID数据对象是否存在")]),e._v(" "),s("ul",[s("li",[e._v("说明: 查看标识为1的用户是否存在")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$isExist = User::existByID( 1 );\nif ( $isExist ) echo("指定标识的用户存在!"); else echo("指定标识的用户不存在!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("指定标识的用户存在!\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("existBy: 判断符合条件的数据对象是否存在")]),e._v(" "),s("ul",[s("li",[e._v("说明: 查看用户名为china的用户是否存在")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$isExist = User::existBy( "username=\'china\'" );\nif ( $isExist ) echo("用户名为china的用户存在!"); else echo("用户名为china的用户不存在!");\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("用户名为china的用户存在!\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("select: 查询当前对象需显示属性的列表")]),e._v(" "),s("ul",[s("li",[e._v("说明: 查看博客名称列表")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$blog_names = Blog::select( "blog_name" );\nprint_r($blog_names);\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Array\n(\n    [0] => 名校公开课\n    [1] => EditArea\n    [2] => PHPLinq\n    [3] => 地图导航第三方库\n    [4] => Web在线编辑器\n)\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("selectOne: 查询当前对象单个需显示的属性")]),e._v(" "),s("ul",[s("li",[e._v("说明: 查看一个博客名称")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$blog_name = Blog::selectOne( "blog_name" );\nprint_r($blog_name);\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("名校公开课\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("get: 查询数据对象列表")]),e._v(" "),s("ul",[s("li",[e._v("说明: 查看博客列表")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$blogs = Blog::get();\nprint_r($blogs);\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Array\n(\n    [0] => Blog Object\n        (\n            [blog_id] => 5\n            [user_id] => 1\n            [blog_name] => 名校公开课\n            [blog_content] => 来自新浪、搜狐、网易和QQ的名校公开课。\n            [id:protected] =>\n            [commitTime] => 1331953386\n            [updateTime] => 2013-12-26 15:27:05\n        )\n    ......\n)\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("getOne: 查询得到单个对象实体")]),e._v(" "),s("ul",[s("li",[e._v("说明: 查看一个博客")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$blog = Blog::getOne();\nprint_r($blog);\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Blog Object\n(\n    [blog_id] => 5\n    [user_id] => 1\n    [blog_name] => 名校公开课\n    [blog_content] => 来自新浪、搜狐、网易和QQ的名校公开课。\n    [id:protected] =>\n    [commitTime] => 1331953386\n    [updateTime] => 2013-12-26 15:27:05\n)\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("getById: 根据表ID主键获取指定的对象")]),e._v(" "),s("ul",[s("li",[e._v("说明: 查看指定标识的博客")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$blog = Blog::getById( 1 );\nprint_r($blog);\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Blog Object\n(\n    [blog_id] => 1\n    [user_id] => 1\n    [blog_name] => Web在线编辑器\n    [blog_content] => 搜索关键字：在线编辑器...\n    [id:protected] =>\n    [commitTime] => 1331953386\n    [updateTime] => 2013-12-26 15:27:05\n)\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("count: 数据对象总计数")]),e._v(" "),s("ul",[s("li",[e._v("说明: 查看博客的数量")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$countBlogs = Blog::count();\necho($countBlogs);\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("5\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("queryPage: 数据对象分页")]),e._v(" "),s("ul",[s("li",[e._v("说明: 查看从第1到5条博客记录")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$blogs = Blog::queryPage( 1, 5 );\nprint_r($blogs);\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Array\n(\n    [0] => Blog Object\n        (\n            [blog_id] => 5\n            [user_id] => 1\n            [blog_name] => 名校公开课\n            [blog_content] => 来自新浪、搜狐、网易和QQ的名校公开课。\n            [id:protected] =>\n            [commitTime] => 1331953386\n            [updateTime] => 2013-12-26 15:27:05\n        )\n    .....\n\n)\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("queryPageByPageNo: 数据对象分页根据当前页数和每页显示记录数")]),e._v(" "),s("ul",[s("li",[e._v("说明: 查看第一页的博客记录，每页3条记录，无查询条件")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$blogs = Blog::queryPageByPageNo( 1, null, 3 );\nprint_r($blogs);\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Array\n(\n    [count] => 5\n    [pageCount] => 2\n    [data] => Array\n        (\n            [0] => Blog Object\n                (\n                    [blog_id] => 5\n                    [user_id] => 1\n                    [blog_name] => 名校公开课\n                    [blog_content] => 来自新浪、搜狐、网易和QQ的名校公开课。\n                    [id:protected] =>\n                    [commitTime] => 1331953386\n                    [updateTime] => 2013-12-26 15:27:05\n                )\n            ......\n        )\n)\n")])])])])])])]),e._v(" "),s("h3",{attrs:{id:"数据对象关系调用示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据对象关系调用示例"}},[e._v("#")]),e._v(" 数据对象关系调用示例")]),e._v(" "),s("p",[e._v("数据对象关系定义详细说明请参考"),s("RouterLink",{attrs:{to:"/core/dataobject/dataobjectspec.html"}},[e._v("数据对象规格说明")]),e._v("相关章节说明。")],1),e._v(" "),s("ul",[s("li",[s("p",[e._v("一对一[has_one]")]),e._v(" "),s("ul",[s("li",[e._v("说明: 查看用户详情")]),e._v(" "),s("li",[e._v("定义示例:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('class Userdetail extends DataObject {\n    static $belongs_has_one = array(\n        "user" => "User"\n    );\n')])])])]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$user       = User::getById( 1 );\n$userdetail = $user->userdetail;\nprint_r($userdetail);\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Userdetail Object\n(\n    [userdetail_id] => 1\n    [user_id] => 1\n    [realname] => 周月璞\n    [profile] => userdetail/profile/20140211094832.png\n    [country] => 1\n    [province] => 25\n    [city] => 321\n    [district] => 2709\n    [address] => 上海市石岚三村80号404室\n    [qq] => 412731900\n    [sex] => 1\n    [birthday] => 1979-03-10\n    [id:protected] =>\n    [commitTime] => 1331953386\n    [updateTime] => 2014-01-09 19:39:52\n)\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("一对多[has_many]")]),e._v(" "),s("ul",[s("li",[e._v("说明: 查看博客评论")]),e._v(" "),s("li",[e._v("定义示例:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('class Blog extends DataObject {\n    static $has_many = array(\n        "comments" => "Comment",\n    );\n')])])])]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$blog     = Blog::getById( 1 );\n$comments = $blog->comments;\nprint_r($comments);\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('Array\n(\n    [0] => Comment Object\n        (\n            [comment_id] => 6\n            [user_id] => 2\n            [comment] => WebWiz RichTextEditor:<a href="http://www.webwiz.co.uk/webwizrichtexteditor/" target="_blank">http://www.webwiz.co.uk/webwizrichtexteditor/</a>\n这是一个商业产品，并不免费，但功能非常丰富，基于 ASP，JavaScript 和 DHTML。\n            [blog_id] => 1\n            [id:protected] =>\n            [commitTime] => 1331953386\n            [updateTime] => 2012-03-17 12:37:46\n        )\n    ......\n)\n')])])])])])]),e._v(" "),s("li",[s("p",[e._v("多对多[many_many]")]),e._v(" "),s("ul",[s("li",[e._v("说明:查看用户角色")]),e._v(" "),s("li",[e._v("定义示例:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('class User extends DataObject {\n    static $many_many = array(\n        "roles" => "Role",\n    );\n')])])])]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$user  = User::getById( 1 );\n$roles = $user->roles;\nprint_r($roles);\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Array\n(\n    [0] => Role Object\n        (\n            [role_id] => 1\n            [role_name] => 项目经理\n            [id:protected] =>\n            [commitTime] => 1331953386\n            [updateTime] => 2015-01-17 20:51:45\n        )\n    ......\n)\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("从属于一对一[belong_has_one]")]),e._v(" "),s("ul",[s("li",[e._v("说明:获取用户信息")]),e._v(" "),s("li",[e._v("定义示例:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('class Userdetail extends DataObject {\n    static $belongs_has_one = array(\n        "user" => "User"\n    );\n')])])])]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$userdetail = Userdetail::getById( 1 );\n$user       = $userdetail->user;\nprint_r($user);\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("User Object\n(\n    [user_id] => 1\n    [username] => admin\n    [password] => 21232f297a57a5a743894a0e4a801fc3\n    [email] => skygreen2001@gmail.com\n    [cellphone] => 13917320293\n    [loginTimes] => 0\n    [id:protected] =>\n    [commitTime] => 1331953415\n    [updateTime] => 2013-12-26 14:31:27\n)\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("从属于多对多[belongs_many_many]")]),e._v(" "),s("ul",[s("li",[e._v("说明:查看角色用户")]),e._v(" "),s("li",[e._v("定义示例:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('class Role extends DataObject {\n    static $belongs_many_many = array(\n        "users" => "User"\n    );\n')])])])]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$role  = Role::getById( 1 );\n$users = $role->users;\nprint_r($users);\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Array\n(\n    [0] => User Object\n        (\n            [user_id] => 1\n            [username] => admin\n            [password] => 21232f297a57a5a743894a0e4a801fc3\n            [email] => skygreen2001@gmail.com\n            [cellphone] => 13917320293\n            [loginTimes] => 0\n            [id:protected] =>\n            [commitTime] => 1331953415\n            [updateTime] => 2013-12-26 14:31:27\n        )\n    ......\n)\n")])])])])])])]),e._v(" "),s("h3",{attrs:{id:"其它实例方法示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其它实例方法示例"}},[e._v("#")]),e._v(" 其它实例方法示例")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("toXml: 数据对象转换成xml字符串")]),e._v(" "),s("ul",[s("li",[e._v("说明: 博客转换成xml字符串")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$blog = Blog::getOne();\necho($blog->toXml());\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<?xml version="1.0" encoding="utf-8"?>\n<Blog>\n    <blog_id>5</blog_id>\n    <user_id>1</user_id>\n    <blog_name>名校公开课</blog_name>\n    <blog_content>来自新浪、搜狐、网易和QQ的名校公开课。</blog_content>\n    <commitTime>1331953386</commitTime>\n    <updateTime>2013-12-26 15:27:05</updateTime>\n</Blog>\n')])])])])])]),e._v(" "),s("li",[s("p",[e._v("toJson: 数据对象转换成Json字符串")]),e._v(" "),s("ul",[s("li",[e._v("说明: 博客转换成Json字符串")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$blog = Blog::getOne();\necho($blog->toJson());\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('{"blog_id":5,"user_id":1,"blog_name":"\\u540d\\u6821\\u516c\\u5f00\\u8bfe","blog_content":"\\u6765\\u81ea\\u65b0\\u6d6a\\u3001\\u641c\\u72d0\\u3001\\u7f51\\u6613\\u548cQQ\\u7684\\u540d\\u6821\\u516c\\u5f00\\u8bfe\\u3002","commitTime":1331953386,"updateTime":"2013-12-26 15:27:05"}\n')])])])])])]),e._v(" "),s("li",[s("p",[e._v("toArray: 数据对象转换成数组")]),e._v(" "),s("ul",[s("li",[e._v("说明: 博客转换成数组")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$blog = Blog::getOne();\nprint_r($blog->toArray());\n")])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Array\n(\n    [blog_id] => 5\n    [user_id] => 1\n    [blog_name] => 名校公开课\n    [blog_content] => 来自新浪、搜狐、网易和QQ的名校公开课。\n    [id] =>\n    [commitTime] => 1331953386\n    [updateTime] => 2013-12-26 15:27:05\n)\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("saveRelationForManyToMany[数据对象多对多存储]")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("说明: 存储角色用户多对多关系")])]),e._v(" "),s("li",[s("p",[e._v("代码如下:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$role = new Role();\n$role->role_id   = 5;\n$role->role_name = "高级程序员";\nUtilDateTime::ChinaTime();\n$role->save();\n$role->saveRelationForManyToMany( "users", "1" );\nprint_r($role);\n')])])])]),e._v(" "),s("li",[s("p",[e._v("输出显示如下:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Role Object\n(\n    [role_id] => 5\n    [role_name] => 高级程序员\n    [commitTime] => 1422779198\n    [updateTime] => 2015-02-01 16:26:38\n)\n")])])])])])])]),e._v(" "),s("h3",{attrs:{id:"其它类方法示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其它类方法示例"}},[e._v("#")]),e._v(" 其它类方法示例")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("max: 获取数据对象指定属性[表列]最大值")]),e._v(" "),s("ul",[s("li",[e._v("说明: 获取用户访问次数最高的次数")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$max = User::max( "loginTimes" );\necho($max);\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("500\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("min: 获取数据对象指定属性[表列]最小值")]),e._v(" "),s("ul",[s("li",[e._v("说明: 获取用户访问次数最低的次数")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$min = User::min( "loginTimes" );\necho($min);\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("2\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("sum: 获取数据对象指定属性[表列]总和")]),e._v(" "),s("ul",[s("li",[e._v("说明: 获取用户访问次数的总和")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$sum = User::sum( "loginTimes" );\necho($sum);\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("630\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("countMultitable: 对象总计数[多表关联查询]")])])]),e._v(" "),s("ul",[s("li",[e._v("说明: 获取博客名称含有Web的评论数")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$count = Comment::countMultitable( "Blog a,Comment b", "b.blog_id=a.blog_id and a.blog_name like \'%Web%\'" );\necho($count);\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("6\n")])])])])]),e._v(" "),s("ul",[s("li",[e._v("queryPageMultitable: 对象分页[多表关联查询]\n"),s("ul",[s("li",[e._v("说明:获取博客名称含有Web的评论")]),e._v(" "),s("li",[e._v("代码如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$comments = Comment::queryPageMultitable( 1, 6, "Blog a,Comment b","b.blog_id=a.blog_id and a.blog_name like \'%Web%\'" );\nprint_r($comments);\n')])])])]),e._v(" "),s("li",[e._v("输出显示如下:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('Array\n(\n    [0] => Comment Object\n        (\n            [comment_id] => 6\n            [user_id] => 2\n            [comment] => WebWiz RichTextEditor:<a href="http://www.webwiz.co.uk/webwizrichtexteditor/" target="_blank">http://www.webwiz.co.uk/webwizrichtexteditor/</a>\n这是一个商业产品，并不免费，但功能非常丰富，基于 ASP，JavaScript 和 DHTML。\n            [blog_id] => 1\n            [id:protected] =>\n            [commitTime] => 1331953386\n            [updateTime] => 2012-03-17 12:37:46\n        )\n    ......\n)\n')])])])])])])])])}),[],!1,null,null,null);a.default=l.exports}}]);